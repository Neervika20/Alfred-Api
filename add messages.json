{"openapi":"3.0.1","info":{"title":"AIfred","description":"","version":"1.0.0"},"tags":[{"name":"Message"}],"paths":{"/apis/conversations/{conversation_id}/messages/":{"post":{"summary":"add message","deprecated":false,"description":"","tags":["Message"],"parameters":[{"name":"sessionid","in":"cookie","description":"","required":true,"example":"{{SESSION_ID}}","schema":{"type":"string"}},{"name":"csrftoken","in":"cookie","description":"","required":true,"example":"{{CSRF_TOKEN}}","schema":{"type":"string"}},{"name":"conversation_id","in":"path","description":"","required":true,"example":"{{CONVERSATION_ID}}","schema":{"type":"string"}},{"name":"X-Csrftoken","in":"header","description":"","required":true,"example":"{{CSRF_TOKEN}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"conversation":{"type":"string"},"index":{"type":"integer"},"version":{"type":"integer"},"role":{"type":"string"},"content":{"anyOf":[{"type":"string"},{"type":"object","properties":{"items":{"type":"array","items":{"anyOf":[{"$ref":"#/components/schemas/Msg - Text"},{"$ref":"#/components/schemas/Msg - Keep Going Query"}]},"minItems":1,"maxItems":1}},"required":["items"]}]}},"required":["conversation","index","version","role","content"]},"example":"//for csv /pdf\r\n    \"conversation\":\"{{CONVO_ID}}\",\r\n    \"index\": 0,\r\n    \"version\": 0,\r\n    \"role\": \"user\",\r\n    \"content\":{\r\n        \"items\":[\r\n        {\r\n            \"type\":\"generate_chart_list\",\r\n            \"content\":\"Please generate a chart list.\"\r\n        }\r\n    ]\r\n    },\r\n    \"type\": \"csv_chat\"\r\n}\r\n\r\n// for general \r\n{\r\n    \"conversation\": \"f25c8fba-b587-4632-b51f-f68120d44f12\",\r\n    \"index\": 0,\r\n    \"version\": 0,\r\n    \"role\": \"user\",\r\n    \"content\": \"hiii\",\r\n    \"type\": \"general_chat\"\r\n}"}}},"responses":{"201":{"description":"success","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"index":{"type":"integer"},"version":{"type":"integer"},"create_time":{"type":"string"},"update_time":{"type":"string"},"role":{"type":"string"},"content":{"type":"string"},"conversation":{"type":"string"}},"required":["id","index","version","create_time","update_time","role","content","conversation"]},"examples":{"1":{"summary":"success","value":"//for csv/pdf\n{\n      \"code\": 0,\n      \"message\": \"success\",\n      \"data\": {\n            \"id\": \"8bf0cd7a-58ec-4030-b76b-2ed7662f5bea\",\n            \"index\": 0,\n            \"version\": 0,\n            \"create_time\": \"2024-04-04T17:38:27.730272+08:00\",\n            \"update_time\": \"2024-04-04T17:38:27.730286+08:00\",\n            \"role\": \"user\",\n            \"type\": \"csv_chat\",\n            \"extra\": null,\n            \"content\": {\n                  \"items\": [\n                        {\n                              \"type\": \"generate_chart_list\"\n                        }\n                  ]\n            },\n            \"favorite\": false,\n            \"conversation\": \"04ea3371-63d6-4a49-be38-2c9b14748305\"\n      }\n}\n\n//for general-chat\n{\n    \"id\": \"eda8b5b2-ff67-48ac-af11-61594f618ae0\",\n    \"index\": 1,\n    \"version\": 0,\n    \"create_time\": \"2024-04-03T18:09:30.641170+08:00\",\n    \"update_time\": \"2024-04-03T18:09:30.643969+08:00\",\n    \"role\": \"assistant\",\n    \"type\": \"general_chat\",\n    \"extra\": null,\n    \"content\": \"Apologies, Azure OpenAI Service is currently unstable. Please wait and try again later. If the issue persists over 30 minutes, please report it to the Labs Team.Hi there! How can I assist you today?\",\n    \"favorite\": false,\n    \"conversation\": \"39d6ad75-c994-4d94-b612-dc8d720e8c60\"\n}"}}}}}},"security":[]}},"/apis/conversations/{conversation_id}/messages/{message_id}/favorite/":{"post":{"summary":"add message to knowledge","deprecated":false,"description":"","tags":["Message"],"parameters":[{"name":"sessionid","in":"cookie","description":"","required":true,"example":"{{SESSION_ID}}","schema":{"type":"string"}},{"name":"csrftoken","in":"cookie","description":"","required":true,"example":"{{CSRF_TOKEN}}","schema":{"type":"string"}},{"name":"conversation_id","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"message_id","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"X-Csrftoken","in":"header","description":"","required":true,"example":"{{CSRF_TOKEN}}","schema":{"type":"string"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer"},"message":{"type":"string"}},"required":["code","message"]},"examples":{"1":{"summary":"成功示例","value":{"code":0,"message":"success"}}}}}}},"security":[]}}},"components":{"schemas":{"Msg - Keep Going Query":{"type":"object","properties":{"type":{"type":"string","const":"keep_going"}},"required":["type"]},"Msg - Text":{"type":"object","properties":{"type":{"type":"string","default":"text","const":"text"},"content":{"type":"string"}},"required":["content"]}},"securitySchemes":{}},"servers":[]}